############ INTEGRATING AD WITH THE *NIX WORLD ############

First things first: 

AD should be at least 2008 because we need to edit:

msDs-supportedEncryptionTypes
https://msdn.microsoft.com/en-us/library/cc223853.aspx

for the accounts that will be used by Unix boxes.

What we want to do is to enable AES for Kerberos that, by default, is not.

Look at AD-Kerberos-AES.ps1 below to have an idea on how to do that.

####### AD-Kerberos-AES.ps1 #######
# The numerical values for Kerberos AES encryption types to support
$AES128 = 0x8
$AES256 = 0x10

# Fetch all users from an OU with their current support encryption types attribute
$Users = Get-ADUser -Filter * -SearchBase "OU=alfresco,DC=tst,DC=lcl" -Properties "msDS-SupportedEncryptionTypes"
foreach($User in $Users)
{
    # If none are currently supported, enable AES256
    $encTypes = $User."msDS-SupportedEncryptionType"
    if(($encTypes -band $AES128) -ne $AES128 -and ($encTypes -band $AES256) -ne $AES256)
    {
        Set-ADUser $User -Replace @{"msDS-SupportedEncryptionTypes"=($encTypes -bor $AES256)}
    }
}
####### AD-Kerberos-AES.ps1 #######


####### ktpass examples for keytab creation #######
# remember, the user in AD should have AES enabled (programmatically or manually doesn't matter)

ktpass -princ http/keycloak.tai.intra@TAI.INTRA -pass !Tai2019! -mapuser tai\keycloak -crypto all -ptype KRB5_NT_PRINCIPAL -out keycloak.keytab -kvno 0

ktpass -princ cifs/alfresco6.tst.lcl@TST.LCL -pass !Alfresco!6 -mapuser tst\cifsalfresco6 -crypto all -ptype KRB5_NT_PRINCIPAL -out cifsalfresco6.keytab -kvno 0

####### ktpass examples for keytab creation #######
